# DBProject5785_4618_7706

## ×ª×•×›×Ÿ ×¢× ×™×™× ×™×  
- [×©×œ×‘ 1: ×ª×›× ×•×Ÿ ×•×‘× ×™×™×ª ××¡×“ ×”× ×ª×•× ×™×](#×©×œ×‘-1-×ª×›× ×•×Ÿ-×•×‘× ×™×™×ª-××¡×“-×”× ×ª×•× ×™×)  
  - [××‘×•×](#××‘×•×)  
  - [ERD (×ª×¨×©×™× ×™×©×•×™×•×ª-×§×©×¨×™×)](#erd-×ª×¨×©×™×-×™×©×•×™×•×ª-×§×©×¨×™×)  
  - [DSD (×ª×¨×©×™× ××‘× ×” × ×ª×•× ×™×)](#dsd-×ª×¨×©×™×-××‘× ×”-× ×ª×•× ×™×)  
  - [×¡×§×¨×™×¤×˜×™× ×‘-SQL](#×¡×§×¨×™×¤×˜×™×-×‘-sql)  
  - [× ×ª×•× ×™×](#× ×ª×•× ×™×)  
  - [×’×™×‘×•×™](#×’×™×‘×•×™)  
- [×©×œ×‘ 2: ××™× ×˜×’×¨×¦×™×” ×•×©××™×œ×ª×•×ª](#×©×œ×‘-2-××™× ×˜×’×¨×¦×™×”)
  - [×©××™×œ×ª×•×ª](#×©××™×œ×ª×•×ª)
  - [××™×œ×•×¦×™×](#××™×œ×•×¦×™×)
  - [rollback  ×• commit ](#rollback  ×• commit )
  - [×’×™×‘×•×™ ××¢×•×“×›×Ÿ](#×’×™×‘×•×™ ××¢×•×“×›×Ÿ)


## ×©×œ×‘ 1: ×ª×›× ×•×Ÿ ×•×‘× ×™×™×ª ××¡×“ ×”× ×ª×•× ×™×  

### ××‘×•×

# ××¢×¨×›×ª × ×™×”×•×œ ××›×•×Ÿ ×›×•×©×¨

## ×ª×™××•×¨ ×”×¤×¨×•×™×§×˜

××¢×¨×›×ª × ×™×”×•×œ ××›×•×Ÿ ×”×›×•×©×¨ × ×•×¢×“×” ×œ×™×™×¢×œ ××ª ×ª×”×œ×™×š ×”××¨×’×•×Ÿ ×•×”××¢×§×‘ ××—×¨ ××™×“×¢ ×—×™×•× ×™ ×”×§×©×•×¨ ×œ×× ×•×™×™×, ××“×¨×™×›×™×, ×¡×•×’×™ ×©×™×¢×•×¨×™×, ×¦×™×•×“ ×•×—×“×¨×™×. ××¢×¨×›×ª ×–×• ×××¤×©×¨×ª ×œ×× ×”×œ×™ ××›×•×Ÿ ×”×›×•×©×¨, ×œ××“×¨×™×›×™× ×•×œ×× ×•×™×™× ×’×™×©×” × ×•×—×” ×œ××™×“×¢ ××¢×•×“×›×Ÿ, ×ª×•×š ×©××™×¨×” ×¢×œ ××‘× ×” × ×ª×•× ×™× ×™×¢×™×œ ×•××¡×•×“×¨.

## ××˜×¨×ª ×”××¢×¨×›×ª

××¡×“ × ×ª×•× ×™× ×–×” ××©××© ×›×¤×ª×¨×•×Ÿ ××•×‘× ×” ×•×××™×Ÿ ×œ××›×•× ×™ ×›×•×©×¨ ×¢×œ ×× ×ª:

- ×œ× ×”×œ ×¨×©×™××ª ×× ×•×™×™×, ×›×•×œ×œ ×ª××¨×™×›×™ ×¨×™×©×•× ×•×ª×•×§×£ ×”×× ×•×™.
- ×œ×§×©×¨ ××“×¨×™×›×™× ××•×¡××›×™× ×œ×¡×•×’×™ ×©×™×¢×•×¨×™× ×©×•× ×™× ×‘×”×ª×× ×œ×¨××ª ×”× ×™×¡×™×•×Ÿ ×”× ×“×¨×©×ª.
- ×œ××¨×’×Ÿ ×©×™×¢×•×¨×™× ×¢×œ ×¤×™ ×™××™× ×‘×©×‘×•×¢, ×©×¢×•×ª, ×¡×•×’×™× ×•×”×“×¨×™×©×•×ª ×”××™×•×—×“×•×ª ×œ×›×œ ×©×™×¢×•×¨.
- ×œ× ×”×œ ××ª ×”×—×“×¨×™× ×”×–××™× ×™× ×‘××›×•×Ÿ ×•×œ×”×‘×˜×™×— ×©×”×§×™×‘×•×œ×ª ××ª××™××” ×œ×©×™×¢×•×¨×™× ×”××ª×•×›× × ×™×.
- ×œ×¢×§×•×‘ ××—×¨ ×¦×™×•×“ ×”×›×•×©×¨, ×›×•×œ×œ ××¦×‘×• ×•××™×§×•××•.

## ××§×¨×™ ×©×™××•×© ×¤×•×˜× ×¦×™××œ×™×™×

- **×× ×”×œ×™ ××›×•×Ÿ ×”×›×•×©×¨** ×™×›×•×œ×™× ×œ×”×©×ª××© ×‘××¢×¨×›×ª ×œ× ×™×”×•×œ ×× ×•×™×™×, ×©×™×¢×•×¨×™×, ××“×¨×™×›×™× ×•×—×“×¨×™× ×‘××•×¤×Ÿ ×™×¢×™×œ ×•××¡×•×“×¨.
- **××“×¨×™×›×™×** ×™×›×•×œ×™× ×œ×‘×“×•×§ ××™×œ×• ×©×™×¢×•×¨×™× ×”× ××•×¡××›×™× ×œ×”×¢×‘×™×¨, ××™×œ×• ×—×“×¨×™× ×–××™× ×™× ×•×œ×”×™×¨×©× ×œ×”×¢×‘×¨×ª ×©×™×¢×•×¨×™× ×‘×”×ª×× ×œ× ×™×¡×™×•× ×.
- **×× ×•×™×™×** ×™×›×•×œ×™× ×œ×”×™×¨×©× ×œ×©×™×¢×•×¨×™× ×”×©×•× ×™× ×‘×”×ª×× ×œ××’×“×¨× ×•×œ×”×¢×“×¤×•×ª×™×”× ×•×œ×•×•×“× ×©×”×©×™×¢×•×¨×™× ××•×ª×××™× ×œ×¨××ª× ×•×œ×¦×¨×›×™×”×.
- **×¦×•×•×ª ×”××›×•×Ÿ** ×™×›×•×œ ×œ×¢×§×•×‘ ××—×¨ ××¦×‘ ×”×¦×™×•×“ ×•×œ×•×•×“× ×ª×—×–×•×§×” ×©×•×˜×¤×ª ×©×œ ×—×“×¨×™ ×”×›×•×©×¨ ×•×”××‘×™×–×¨×™×.

××¡×“ × ×ª×•× ×™× ×–×” ××¡×™×™×¢ ×œ×™×™×¢×•×œ ×”× ×™×”×•×œ, ×œ×©×™×¤×•×¨ ×”××¨×’×•×Ÿ ×•×œ×©××™×¨×” ×¢×œ ×—×•×•×™×™×ª ××™××•×Ÿ ××•×¤×˜×™××œ×™×ª ×¢×‘×•×¨ ×›×œ×œ ×”××©×ª××©×™×.


###  ERD (×ª×¨×©×™× ×™×©×•×™×•×ª-×§×©×¨×™×)    
![ERD (×ª×¨×©×™× ×™×©×•×™×•×ª-×§×©×¨×™×)](Stage1/ERDAndDSD/ERD.png)  

###  DSD  (×ª×¨×©×™× ××‘× ×” × ×ª×•× ×™×)
![DSD (×ª×¨×©×™× ××‘× ×” × ×ª×•× ×™×)](Stage1/ERDAndDSD/DSD.png)  

### ×¡×§×¨×™×¤×˜×™× ×‘-SQL  
×¡×¤×§ ××ª ×¡×§×¨×™×¤×˜×™ ×”-SQL ×”×‘××™×:  
- **×¡×§×¨×™×¤×˜ ×™×¦×™×¨×ª ×˜×‘×œ××•×ª** - ×”×¡×§×¨×™×¤×˜ ×œ×™×¦×™×¨×ª ×˜×‘×œ××•×ª ××¡×“ ×”× ×ª×•× ×™× ×–××™×Ÿ ×‘×××’×¨:  

ğŸ“œ **[×¦×¤×™×™×” ×‘-create_tables.sql](Stage1/scripts/createTable.sql)**  

- **×¡×§×¨×™×¤×˜ ×”×•×¡×¤×ª × ×ª×•× ×™×** - ×”×¡×§×¨×™×¤×˜ ×œ×”×–× ×ª × ×ª×•× ×™× ×œ×˜×‘×œ××•×ª ××¡×“ 


×”× ×ª×•× ×™× ×–××™×Ÿ ×‘×××’×¨:  

ğŸ“œ **[×¦×¤×™×™×” ×‘-insert_tables.sql](Stage1/scripts/insertTables.sql)**  

- **×¡×§×¨×™×¤×˜ ××—×™×§×ª ×˜×‘×œ××•×ª** - ×”×¡×§×¨×™×¤×˜ ×œ××—×™×§×ª ×›×œ ×”×˜×‘×œ××•×ª ×–××™×Ÿ ×‘×××’×¨:  

ğŸ“œ **[×¦×¤×™×™×” ×‘-drop_tables.sql](Stage1/scripts/dropTables.sql)**  

- **×¡×§×¨×™×¤×˜ ×©×œ×™×¤×ª ×›×œ ×”× ×ª×•× ×™×** - ×”×¡×§×¨×™×¤×˜ ×œ×©×œ×™×¤×ª ×›×œ ×”× ×ª×•× ×™× ××›×œ ×”×˜×‘×œ××•×ª ×–××™×Ÿ ×‘×××’×¨:  

ğŸ“œ **[×¦×¤×™×™×” ×‘-selectAll_tables.sql](Stage1/scripts/selectAll.sql)**

### × ×ª×•× ×™×  
#### ×›×œ×™ ×¨××©×•×Ÿ: ×©×™××•×© ×‘-[Mockaroo](https://www.mockaroo.com/) ×œ×™×¦×™×¨×ª ×§×•×‘×¥ CSV  
##### ×”×–× ×ª × ×ª×•× ×™× ×œ×˜×‘×œ×ª person  
- ×˜×•×•×— ××–×”×™ person: 1-800  
ğŸ“œ [×¦×¤×™×™×” ×‘-`Person.csv`](Stage1/mockData/Person.csv)  

##### ×”×–× ×ª × ×ª×•× ×™× ×œ×˜×‘×œ×ª Member  
- ×˜×•×•×— ××–×”×™ person: 1-400  
ğŸ“œ [×¦×¤×™×™×” ×‘-`Member.csv`](Stage1/mockData/Member.csv)  
 
##### ×”×–× ×ª × ×ª×•× ×™× ×œ×˜×‘×œ×ª Trainer
- ×˜×•×•×— ××–×”×™ person: 401-800  
- × ×•×¡×—×ª ××–×”×” ××™×©: `this + 400`  
ğŸ“œ [×¦×¤×™×™×” ×‘-`Trainer.csv`](Stage1/mockData/Trainer.csv)  


### ×“×•×’××” ×œ×”××—×©×ª ×”×¢×‘×•×“×” ×‘××ª×¨ ×¢×‘×•×¨ ×”×˜×‘×œ×” Person: 
- ×”×’×“×¨×ª ×¡×•×’×™ ×ª×›×•× ×•×ª ×”×™×©×•×ª ×•×©××•×ª×™×”× ×‘××ª×¨
![image](Stage1/mockData/1.jpeg)
- ×”×¢×œ××ª ×”×§×•×‘×¥ ×©× ×•×¦×¨ ×œ×××’×¨ ×¢"×™ ×¢××™×“×” ×¢×œ ×”×˜×‘×œ×” ×©×œ Person, ×œ×—×™×¦×” ×™×× ×™×ª ×•- Import->Export Data
![image](Stage1/mockData/2.jpeg)
 - ×ª×•×¦××ª ×”×©××™×œ×ª× `;SELECT * FROM Person`:
![image](Stage1/mockData/3.jpeg)
   

### ×›×œ×™ ×©× ×™: ×©×™××•×© ×‘-[generatedata](https://generatedata.com/generator) ×œ×™×¦×™×¨×ª ×§×•×‘×¥ CSV  
##### ×”×–× ×ª × ×ª×•× ×™× ×œ×˜×‘×œ×ª Room  
- ×˜×•×•×— ××¡×¤×¨×™ ×§×‘×•×¦×”: 1-400  
ğŸ“œ [×¦×¤×™×™×” ×‘-`Room.csv`](Stage1/genData/Room.csv)
##### ×”×–× ×ª × ×ª×•× ×™× ×œ×˜×‘×œ×ª Class  
- ×˜×•×•×— ××¡×¤×¨×™ ×§×‘×•×¦×”: 1-400  
ğŸ“œ [×¦×¤×™×™×” ×‘-`Class.csv`](Stage1/genData/Class.csv)
##### ×”×–× ×ª × ×ª×•× ×™× ×œ×˜×‘×œ×ª ClassType  
- ×˜×•×•×— ××¡×¤×¨×™ ×§×‘×•×¦×”: 1-400  
ğŸ“œ [×¦×¤×™×™×” ×‘-`ClassType.csv`](Stage1/genData/ClassType.csv)  

### ×“×•×’××” ×œ×”××—×©×ª ×”×¢×‘×•×“×” ×‘××ª×¨ ×¢×‘×•×¨ ×”×˜×‘×œ×” ClassType: 
- ×”×’×“×¨×ª ×¡×•×’×™ ×ª×›×•× ×•×ª ×”×™×©×•×ª ×•×©××•×ª×™×”× ×‘××ª×¨

![image](Stage1/genData/1.jpeg)

- ×¢×¨×™×›×ª ×”×”×’×“×¨×•×ª ×œ×”×•×¦××ª ×§×•×‘×¥ ×‘×¤×•×¨××˜ CSV


![image](Stage1/genData/2.jpeg)

![image](Stage1/genData/3.jpeg)


- ×™×¦×™×¨×ª 400 ×¨×©×•××•×ª ×œ×˜×‘×œ×” ×•×œ×—×™×¦×” ×¢×œ Generate
  
![image](Stage1/genData/4.jpeg)


- ×”×¢×œ××ª ×”×§×•×‘×¥ ×”× ×•×¦×¨ ×œ×××’×¨ ×•×§×‘×œ×ª ×”××™×©×•×¨ ×œ×”×œ×Ÿ

![image](Stage1/genData/5.jpeg)

 - ×ª×•×¦××ª ×”×©××™×œ×ª×” `;SELECT 'ClassType' AS table_name, COUNT(*) FROM ClassType`:

![image](Stage1/genData/6.jpeg)


#### ×›×œ×™ ×©×œ×™×©×™: ×©×™××•×© ×‘-Python ×œ×™×¦×™×¨×ª ×§×‘×¦×™ CSV
##### ×™×¦×™×¨×ª × ×ª×•× ×™× ×œ×˜×‘×œ×ª Equipment
- ×˜×•×•×— ××¡×¤×¨×™ ×§×‘×•×¦×”: 1-400  
ğŸ“œ [×¦×¤×™×™×” ×‘-`Equipment.csv`](Stage1/pythonData/Equipment.csv)
##### ×™×¦×™×¨×ª × ×ª×•× ×™× ×œ×˜×‘×œ×ª Certified_For  
- ×©× ×™ ××¤×—×ª×•×ª ×–×¨×™× ×¢"×¤ ×˜×•×•×—×™×”×
ğŸ“œ [×¦×¤×™×™×” ×‘-`Certified_For.csv`](Stage1/pythonData/Certified_For.csv)
##### ×™×¦×™×¨×ª × ×ª×•× ×™× ×œ×˜×‘×œ×ª Registers_For  
- ×©× ×™ ××¤×ª×—×•×ª ×–×¨×™× ×¢"×¤ ×˜×•×•×—×™×”×  
ğŸ“œ [×¦×¤×™×™×” ×‘-`Registers_For.csv`](Stage1/pythonData/Registers_For.csv)

##### ×¡×§×¨×™×¤×˜ ×”×™×¦×™×¨×”: [×¦×¤×™×™×” ×‘-`genCSV.py`](Stage1/pythonData/genCSV.py)
- 3 ×§×‘×¦×™ ×”CSV ×©×”×¡×§×¨×™×¤×˜ ×™×¦×¨ ×”×•×¢×œ××• ×‘×”×¦×œ×—×” ×œ×××’×¨

![image](Stage1/pythonData/1.jpeg)

![image](Stage1/pythonData/2.jpeg)

![image](Stage1/pythonData/3.jpeg)


### ×’×™×‘×•×™  
- ×§×‘×¦×™ ×”×’×™×‘×•×™ × ×©××¨×™× ×¢× ×”×ª××¨×™×š ×•×”×©×¢×” ×©×œ ××•×¢×“ ×”×’×™×‘×•×™:
  
ğŸ“œ [×¦×¤×™×™×” ×‘×ª×™×§×™×™×ª ×”×’×™×‘×•×™×™×-`Backups`](Stage1)

- ×”×¦×“ ×”××’×‘×”: ×¢×•××“ ×¢×œ ×”×××’×¨, ×œ×—×™×¦×” ×™×× ×™×ª ×•×‘×•×—×¨ ××ª ×”××¤×©×¨×•×ª ×©×œ Backup.
- ×™×© ×œ×‘×—×•×¨ ×‘×¤×•×¨××˜ Tar ×•×œ×§×¨× ×œ×§×•×‘×¥ ×‘×©× backup_dd_mm_yy_hh_mi ×œ××¢×Ÿ ×”×¡×“×¨ ×”×˜×•×‘.
 


![1](https://github.com/user-attachments/assets/5319fd11-2a44-436d-9854-ab3b31784da2)


- ×”×¦×“ ×”××©×—×–×¨: ×“×•××’ ×©×§×•×‘×¥ ×”×’×™×‘×•×™ ×©× ×•×¦×¨ ×™×”×™×” × ××¦× ××¦×œ×• ×‘Storage Manager, ×¢×•××“ ×¢×œ ×”×××’×¨, ×œ×—×™×¦×” ×™×× ×™×ª ×•×‘×•×—×¨ ××ª ×”××¤×©×¨×•×ª ×©×œ Restore
- ×•×‘×•×—×¨ ××ª ×§×•×‘×¥ ×”×’×™×‘×•×™ ×”××“×•×‘×¨
  
![2](https://github.com/user-attachments/assets/b0399c59-ba81-4cc5-8699-3ca952d856ef)


## ×©×œ×‘ 2: ××™× ×˜×’×¨×¦×™×” ×•×©××™×œ×ª×•×ª
### ×©××™×œ×ª×•×ª 
ğŸ“œ [×¦×¤×™×™×” ×‘×§×•×‘×¥ ×”×©××™×œ×ª×•×ª-`Queries.sql`](Stage2)

#### 8 ×©××™×œ×ª×•×ª SELECT:
1. 

### ××™×œ×•×¦×™×

ğŸ“œ [×¦×¤×™×™×” ×‘×§×•×‘×¥ ×”××™×œ×•×¦×™×-`Constraints.sql`](Stage2)


### ××™×œ×•×¥ 1 ×¢×œ ×”×˜×‘×œ×” - Room 
**×ª×™××•×¨ ×”×©×™× ×•×™:**
×”×•×¡×¤× ×• ××™×œ×•×¥ ×©×‘×•×“×§ ×©×§×™×‘×•×œ×ª ×—×“×¨ ×”×™× ×¢×¨×š ×—×™×•×‘×™ ×•×œ× ×’×“×•×œ×” ×-200.

**×¤×§×•×“×ª ALTER TABLE:**
```sql
ALTER TABLE Room
ADD CONSTRAINT chk_capacity_positive CHECK (Capacity > 0 AND Capacity <= 200);
```

**× ×™×¡×™×•×Ÿ ×œ×”×›× ×™×¡ × ×ª×•×Ÿ ×œ× ×—×•×§×™:**
```sql
INSERT INTO Room (IdR, NameR, Capacity)
VALUES (402, 'SmallRoom', 0);
```

**××” ×™×§×¨×”:**
×©×’×™××” â€” ×”××™×œ×•×¥ `chk_capacity_positive` ×™×•×¤×¢×œ ×•×ª×ª×§×‘×œ ×”×•×“×¢×”:

![WhatsApp Image 2025-04-27 at 19 02 56](https://github.com/user-attachments/assets/61569dc4-e935-432e-8c2d-b011357fd29d)


---

### ××™×œ×•×¥ 2 ×¢×œ ×”×˜×‘×œ×” - Equipment 
**×ª×™××•×¨ ×”×©×™× ×•×™:**
×©×™× ×™× ×• ××ª ×¢××•×“×ª `Condition` ×›×š ×©×× ×œ× ×™×•×–×Ÿ ×¢×¨×š â€” ×™×•×’×“×¨ ××•×˜×•××˜×™×ª ×›-'T' (×ª×§×™×Ÿ).

**×¤×§×•×“×ª ALTER TABLE:**
```sql
ALTER TABLE Equipment
ALTER COLUMN Condition SET DEFAULT 'T';
```

**× ×™×¡×™×•×Ÿ ×œ×”×›× ×™×¡ ×¦×™×•×“ ×‘×œ×™ ×œ×¦×™×™×Ÿ Condition:**
```sql
INSERT INTO Equipment (IdE, NameE, IdR)
VALUES (201, 'Treadmill', 1);
```

**××” ×™×§×¨×”:**

×œ× ×ª×”×™×” ×©×’×™××”! 
![WhatsApp Image 2025-04-27 at 19 19 01](https://github.com/user-attachments/assets/600b64e1-6afa-4ea4-8e76-bb8e7d73f27b)

×¤×©×•×˜ ×™×ª×•×•×¡×£ ×œ×¨×©×•××” ×¢×¨×š ×‘×¨×™×¨×ª ××—×“×œ `Condition = 'T'`.

×ª×•×¦××ª ×”×©××™×œ×ª× ` ;SELECT * FROM Equipment WHERE IdE = 402` :

![WhatsApp Image 2025-04-27 at 19 41 32](https://github.com/user-attachments/assets/b8435748-ab4b-4342-8eae-e306b5bcc2c4)

---

### ××™×œ×•×¥ 3 ×¢×œ ×”×˜×‘×œ×” - Member
**×ª×™××•×¨ ×”×©×™× ×•×™:**
× ×•×¡×£ ××™×œ×•×¥ ×©×‘×•×“×§ ×©-`ExpirationDate` ×’×“×•×œ ×-`RegistrationDate`.

**×¤×§×•×“×ª ALTER TABLE:**
```sql
ALTER TABLE Member
ADD CONSTRAINT chk_member_dates CHECK (ExpirationDate > RegistrationDate);
```

**× ×™×¡×™×•×Ÿ ×œ×”×›× ×™×¡ × ×ª×•×Ÿ ×œ× ×—×•×§×™:**
```sql
INSERT INTO Member (Id, RegistrationDate, ExpirationDate)
VALUES (402, '2025-05-01', '2025-04-01');
```

**××” ×™×§×¨×”:**
×ª×ª×§×‘×œ ×©×’×™××” ×¢×œ ×”×¤×¨×ª ×”××™×œ×•×¥:


![WhatsApp Image 2025-04-27 at 19 44 59](https://github.com/user-attachments/assets/f57b0240-2d5e-4451-8265-81e35cef354e)


